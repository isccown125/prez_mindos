import { gsap } from "gsap";
import { useLayoutEffect, useRef } from "react";

const PulseIcon = () => {
  const circle1 = useRef<SVGAElement>(null);
  const circle2 = useRef<SVGAElement>(null);

  useLayoutEffect(() => {
    const g = gsap.context(() => {
      const tl1 = gsap.timeline({
        repeat: Infinity,
        repeatDelay: 0.3,
      });
      const tl2 = gsap.timeline({
        repeat: Infinity,
        repeatDelay: 0.3,
      });

      tl1.fromTo(
        circle2.current,
        { opacity: 0, scale: 0, outlineOffset: 0, transformOrigin: "center" },
        {
          scale: 0.8,
          opacity: 0.6,
          duration: 0.8,
          transformOrigin: "center",
          ease: "power4",
        }
      );

      tl2.fromTo(
        circle1.current,
        { opacity: 0, scale: 0, transformOrigin: "center" },
        {
          scale: 0.9,
          opacity: 0.3,
          duration: 0.6,
          transformOrigin: "center",
          ease: "power1",
        }
      );
    });

    return () => g.revert();
  });
  return (
    <div className="absolute">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="74.72"
        height="74.72"
        viewBox="0 0 74.72 74.72"
      >
        <g id="icon_click" transform="translate(-0.386 -0.386)">
          <g
            id="Base"
            transform="translate(0.386 0.386)"
            fill="none"
            opacity="0"
            ref={circle2}
          >
            <path
              d="M37.36,0A37.36,37.36,0,1,1,0,37.36,37.36,37.36,0,0,1,37.36,0Z"
              stroke="none"
            />
            <path
              d="M 37.35986328125 2 C 32.58543014526367 2 27.95487594604492 2.93463134765625 23.59681701660156 4.777931213378906 C 19.38642883300781 6.55877685546875 15.60469818115234 9.108627319335938 12.35666275024414 12.35666275024414 C 9.108627319335938 15.60469818115234 6.55877685546875 19.38642883300781 4.777931213378906 23.59681701660156 C 2.93463134765625 27.95487594604492 2 32.58543014526367 2 37.35986328125 C 2 42.13429641723633 2.93463134765625 46.76485443115234 4.777931213378906 51.12290954589844 C 6.55877685546875 55.33329772949219 9.108627319335938 59.11502838134766 12.35666275024414 62.36306381225586 C 15.60469818115234 65.61109924316406 19.38642883300781 68.16094970703125 23.59681701660156 69.94179534912109 C 27.95487594604492 71.78509521484375 32.58543014526367 72.7197265625 37.35986328125 72.7197265625 C 42.13429641723633 72.7197265625 46.76485443115234 71.78509521484375 51.12290954589844 69.94179534912109 C 55.33329772949219 68.16094970703125 59.11502838134766 65.61109924316406 62.36306381225586 62.36306381225586 C 65.61109924316406 59.11502838134766 68.16094970703125 55.33329772949219 69.94179534912109 51.12290954589844 C 71.78509521484375 46.76485443115234 72.7197265625 42.13429641723633 72.7197265625 37.35986328125 C 72.7197265625 32.58543014526367 71.78509521484375 27.95487594604492 69.94179534912109 23.59681701660156 C 68.16094970703125 19.38642883300781 65.61109924316406 15.60469818115234 62.36306381225586 12.35666275024414 C 59.11502838134766 9.108627319335938 55.33329772949219 6.55877685546875 51.12290954589844 4.777931213378906 C 46.76485443115234 2.93463134765625 42.13429641723633 2 37.35986328125 2 M 37.35986328125 0 C 57.99314117431641 0 74.7197265625 16.72658538818359 74.7197265625 37.35986328125 C 74.7197265625 57.99314117431641 57.99314117431641 74.7197265625 37.35986328125 74.7197265625 C 16.72658538818359 74.7197265625 0 57.99314117431641 0 37.35986328125 C 0 16.72658538818359 16.72658538818359 0 37.35986328125 0 Z"
              stroke="none"
              fill="#fff"
            />
          </g>
          <g
            id="Base-2"
            data-name="Base"
            transform="translate(13.646 13.646)"
            fill="none"
            opacity="0"
            ref={circle1}
          >
            <path
              d="M24.1,0A24.1,24.1,0,1,1,0,24.1,24.1,24.1,0,0,1,24.1,0Z"
              stroke="none"
            />
            <path
              d="M 24.099609375 2 C 21.11529922485352 2 18.2213191986084 2.584030151367188 15.4980583190918 3.735877990722656 C 12.8666877746582 4.848850250244141 10.50305938720703 6.442588806152344 8.472820281982422 8.472820281982422 C 6.442588806152344 10.50305938720703 4.848850250244141 12.8666877746582 3.735877990722656 15.4980583190918 C 2.584030151367188 18.2213191986084 2 21.11529922485352 2 24.099609375 C 2 27.08391952514648 2.584030151367188 29.9778995513916 3.735877990722656 32.7011604309082 C 4.848850250244141 35.33252716064453 6.442588806152344 37.69615936279297 8.472827911376953 39.72638702392578 C 10.50305938720703 41.75662994384766 12.8666877746582 43.35036849975586 15.4980583190918 44.46334075927734 C 18.2213191986084 45.61518859863281 21.11529922485352 46.19921875 24.099609375 46.19921875 C 27.08391952514648 46.19921875 29.9778995513916 45.61518859863281 32.7011604309082 44.46334075927734 C 35.33252716064453 43.35036849975586 37.69615936279297 41.75662994384766 39.72638702392578 39.72638702392578 C 41.75662994384766 37.69615936279297 43.35036849975586 35.33252716064453 44.46334075927734 32.7011604309082 C 45.61518859863281 29.9778995513916 46.19921875 27.08391952514648 46.19921875 24.099609375 C 46.19921875 21.11529922485352 45.61518859863281 18.2213191986084 44.46334075927734 15.4980583190918 C 43.35036849975586 12.8666877746582 41.75662994384766 10.50305938720703 39.72638702392578 8.472827911376953 C 37.69615936279297 6.442588806152344 35.33252716064453 4.848850250244141 32.7011604309082 3.735877990722656 C 29.9778995513916 2.584030151367188 27.08391952514648 2 24.099609375 2 M 24.099609375 0 C 37.40945053100586 0 48.19921875 10.78976058959961 48.19921875 24.099609375 C 48.19921875 37.40945053100586 37.40945053100586 48.19921875 24.099609375 48.19921875 C 10.78976058959961 48.19921875 0 37.40945053100586 0 24.099609375 C 0 10.78976058959961 10.78976058959961 0 24.099609375 0 Z"
              stroke="none"
              fill="#fff"
            />
          </g>
          <circle
            id="Ellipse_85"
            data-name="Ellipse 85"
            cx="14"
            cy="14"
            r="14"
            transform="translate(23.386 23.386)"
            fill="#fff"
          />
        </g>
      </svg>
    </div>
  );
};

export default PulseIcon;
